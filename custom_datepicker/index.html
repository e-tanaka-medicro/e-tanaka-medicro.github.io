<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日付ピッカーの例</title>

    <!-- jQuery UI CSS -->
    <link rel="stylesheet"
        href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/ui-lightness/jquery-ui.css">

    <!-- jQuery（必須） -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <!-- jQuery UI JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <!-- jQuery UI 日本語ロケール -->
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/i18n/datepicker-ja.js"></script>
</head>

<body>

    <p>日付を選択してください：<input type="text" id="datepicker"></p>


    <script>
        jQuery(function ($) {
            $.get('https://holidays-jp.github.io/api/v1/date.json', function (holidaysData) {
                var holidays = Object.keys(holidaysData);

                // 例: 管理画面や固定配列で設定
                var specialOpen = ["2025-09-23", "2025-09-20"];  // 特別営業日
                var specialClose = ["2025-09-01", "2025-09-02"]; // 特別休業日

                $('#datepicker').datepicker({
                    dateFormat: 'yy-mm-dd',
                    beforeShowDay: function (date) {
                        // yyyy-mm-dd に変換
                        var ymd = date.getFullYear() + '-' +
                            String(date.getMonth() + 1).padStart(2, '0') + '-' +
                            String(date.getDate()).padStart(2, '0');

                        var day = date.getDay();

                        // 1. 特別営業日は強制選択可
                        if (specialOpen.includes(ymd)) {
                            return [true, "special-open", "特別営業日"];
                        }

                        // 2. 特別休業日は選択不可
                        if (specialClose.includes(ymd)) {
                            return [false, "special-close", "特別休業日"];
                        }

                        // 3. 土日祝日のブロック
                        if (day === 0 || day === 6 || holidays.includes(ymd)) {
                            return [false, "blocked-day", "休日"];
                        }

                        // 4. それ以外は選択可
                        return [true, '', ''];
                    }
                });
            });
        });



    </script>
</body>



</html>
